The main source of failure in job 59017498083 is from the test file **tests**/api/indicators.test.ts, specifically:

- Test: GET /api/indicators/[symbol]/[timeframe] › should handle MT5ServiceError
- The test expects the response to have an error message "MT5 service error", but the actual response is "Internal server error".

Here's how to fix this:

### Root Cause

The API route handling MT5 service errors is not returning the specific error message "MT5 service error" in its response. Instead, it returns a generic "Internal server error". The test expects the error message to match the service error.

### Solution

1. **Update your error handling logic** in the API route for `/api/indicators/[symbol]/[timeframe]` so that MT5ServiceError is explicitly caught and the response JSON has the expected message.

If you are using a custom error class, ensure your handler recognizes it. Here’s a suggested change to your error handling block in `app/api/indicators/[symbol]/[timeframe]/route.ts`:

```typescript
// Example structure; adapt to match your actual codebase
import { MT5ServiceError } from 'path/to/MT5ServiceError';

// Your route handler
export async function GET(req: NextRequest, context: any) {
  try {
    // ... some code that may throw MT5ServiceError
  } catch (error) {
    if (error instanceof MT5ServiceError) {
      return NextResponse.json({ error: 'MT5 service error' }, { status: 500 });
    }
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}
```

2. **Check your test expectation:**  
   The test at `__tests__/api/indicators.test.ts` (around line 489) expects this exact message. Matching the above should make the test pass.

### Further Recommendations

- Review all other places where service errors are caught and sent in responses for consistency.
- If needed, provide more specific details in custom errors to improve debugging.

---

**Summary:**  
Update your API route to catch MT5ServiceError and return `{ error: "MT5 service error" }` with status 500 to match test expectations.

If you need the exact code block for your route handler, please share the specific implementation from `app/api/indicators/[symbol]/[timeframe]/route.ts`.

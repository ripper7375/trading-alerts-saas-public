The primary cause of the failing job is a missing CRON_SECRET environment variable, which is required for the cron-related API routes to function. The logs explicitly show:

console.error
CRON_SECRET not configured
app/api/cron/process-pending-disbursements/route.ts:24:13

This leads to tests for endpoints that check the presence and value of CRON_SECRET to fail with a 500 or 401 status.

**Solution:**

1. In your CI/CD environment (e.g., GitHub Actions), add the CRON_SECRET as an environment variable in your workflow definition. Here’s how you can add it in your .github/workflows/ci-nextjs-progressive.yml file:

```yaml
env:
  CRON_SECRET: your-secret-value
```

Or, if your job steps are explicitly defining env, add it to the job or step:

```yaml
jobs:
  build-and-test:
    runs-on: ubuntu-latest
    env:
      CRON_SECRET: your-secret-value
    steps:
      # ... other steps ...
```

2. Make sure to use a secure value and consider using GitHub Secrets:

- In your repository, go to Settings → Secrets and variables → Actions → New repository secret.
- Name it CRON_SECRET and set the value.
- Reference it in your workflow:

```yaml
env:
  CRON_SECRET: ${{ secrets.CRON_SECRET }}
```

**Summary:**  
Add the CRON_SECRET environment variable to your CI configuration as shown above.

---

Let me know if you need a sample workflow snippet or if you want a solution for any other specific error in your logs.

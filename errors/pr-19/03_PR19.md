I'll analyze the failing job to find a solution for you. ## Solution

The job is failing due to a Prisma schema validation error. The issue is on **line 659** in `prisma/schema.prisma`:

**Problem:** The `DisbursementTransaction` model has a one-to-one relationship with `Commission`, but the foreign key field `commissionId` is not marked as `@unique`. Prisma requires unique fields on the defining side of one-to-one relations.

**Fix:** You need to either:

### Option 1: Make it a true one-to-one relationship (recommended if each commission should only have one disbursement)

Add `@unique` to the `commissionId` field:

```prisma
model DisbursementTransaction {
  id                String   @id @default(cuid())

  // Batch Reference
  batchId           String
  batch             PaymentBatch @relation(fields: [batchId], references: [id])

  // Commission Reference (from Part 17)
  commissionId      String   @unique  // Add @unique here
  commission        Commission @relation(fields: [commissionId], references: [id])

  // ...  rest of the model
}
```

### Option 2: Change to a one-to-many relationship (if a commission can have multiple disbursements)

Modify both models:

**In `Commission` model (line 484):**

```prisma
// Part 19: Disbursement relationship
disbursementTransactions DisbursementTransaction[]  // Change to array
```

**In `DisbursementTransaction` model (line 659):**

```prisma
commission        Commission @relation(fields: [commissionId], references: [id])
// Remove the @unique constraint from commissionId
```

Choose **Option 1** if each commission should only be disbursed once, or **Option 2** if you need to track multiple disbursement attempts per commission.

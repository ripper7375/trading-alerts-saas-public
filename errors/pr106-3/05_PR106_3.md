The job failed due to tests in **tests**/api/indicators.test.ts that expect your API to return specific error messages and status codes for certain failure cases in GET /api/indicators/[symbol]/[timeframe]. Two key test failures are:

- Should handle MT5ServiceError: expects status 500, data.success to be false, and data.error to be 'MT5 service error'.
- Should handle unknown errors gracefully: expects status 500, data.success to be false, and data.error to be 'Internal server error'.

Your route handler app/api/indicators/[symbol]/[timeframe]/route.ts already has specific branches for MT5ServiceError and a generic catch-all for unknown errors, each returning the correct error keys and status. However, your function returns both error and message keys in the error responses:

```typescript
return NextResponse.json(
  {
    success: false,
    error: 'MT5 service error',
    message:
      'Failed to fetch indicator data from MT5 service. Please try again later.',
  },
  { status: 500 }
);
```

Jest tests (for both 'MT5 service error' and 'Internal server error') expect data.error to be exactly 'MT5 service error' or 'Internal server error', and do not assert that a data.message property exists.

**Solution:**  
Check whether the response object in route.ts includes additional error properties (such as message) that the test is not expecting. You should either:

A) Change your test expectations to accept a message key,  
OR  
B) Remove the message key from the error responses in your handler, so only error is present.

**Quick Code Fix:**  
In app/api/indicators/[symbol]/[timeframe]/route.ts, edit your MT5ServiceError and unknown error branches like this:

Replace:

```typescript
return NextResponse.json(
  {
    success: false,
    error: 'MT5 service error',
    message:
      'Failed to fetch indicator data from MT5 service. Please try again later.',
  },
  { status: 500 }
);
```

With:

```typescript
return NextResponse.json(
  {
    success: false,
    error: 'MT5 service error',
  },
  { status: 500 }
);
```

And in the unknown error handler, replace:

```typescript
return NextResponse.json(
  {
    success: false,
    error: 'Internal server error',
    message: 'An unexpected error occurred. Please try again later.',
  },
  { status: 500 }
);
```

With:

```typescript
return NextResponse.json(
  {
    success: false,
    error: 'Internal server error',
  },
  { status: 500 }
);
```

This will align your API responses with the tests' expectations and resolve the suite failures.

- [Test file for reference (**tests**/api/indicators.test.ts)](https://github.com/ripper7375/trading-alerts-saas-public/blob/2235ee80d761ced107e0293fb88cf7f9074f1d0e/__tests__/api/indicators.test.ts)
- [API route handler (app/api/indicators/[symbol]/[timeframe]/route.ts)](https://github.com/ripper7375/trading-alerts-saas-public/blob/2235ee80d761ced107e0293fb88cf7f9074f1d0e/app/api/indicators/%5Bsymbol%5D/%5Btimeframe%5D/route.ts)

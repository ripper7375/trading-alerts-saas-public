The failing job 58999846833 shows two main issues:

---

### 1. Failing tests due to error response messages

Tests are expecting specific error messages (like "Invalid symbol" or "Invalid timeframe") from your API endpoints, but your routes are returning "Validation error" instead.

**Example from logs:**

- Expected: "Invalid symbol"
- Received: "Validation error"

#### Solution:

Update the error handling in your API route handlers to return the specific error messages required by your tests. For example:

```typescript
// Instead of a generic error:
return NextResponse.json({ error: 'Validation error' }, { status: 400 });

// Use more specific messages:
return NextResponse.json({ error: 'Invalid symbol' }, { status: 400 });
return NextResponse.json({ error: 'Invalid timeframe' }, { status: 400 });
```

You should check where the validation fails. For the relevant API handlers (likely in `app/api/indicators/[symbol]/[timeframe]/route.ts`), ensure the returned message matches the test expectation.

---

### 2. Codecov upload token issue

The logs show Codecov is failing with "Token required - not valid tokenless upload" and "No coverage reports found." This is an integration/configuration issue, not a test failure, but will cause the workflow to fail.

#### Solution:

- Add your Codecov upload token as a secret (e.g., `CODECOV_TOKEN`) in your GitHub repository settings.
- Then update your workflow file `.github/workflows/ci-nextjs-progressive.yml` to provide this token to the Codecov action:

```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v4
  with:
    token: ${{ secrets.CODECOV_TOKEN }}
```

---

### Action Items

1. Update the relevant API route error responses to match the test expectations exactly.
2. Add a Codecov token in your repo secrets and reference it in your workflow.

---

If you need file locations or exact places to change, just ask! Share the route handler where errors are returned for the indicators endpoint, and I can provide a more specific code fix.

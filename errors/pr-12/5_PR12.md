I'll analyze the failing job to find a solution for you. I found the issue. The type check is failing with 6 TypeScript errors. Let me get the affected files to provide specific fixes: ## Solution for TypeScript Errors

The build is failing due to several TypeScript errors. Here are the fixes:

### 1. **Unused `request` parameter** (line 32)

**File:** `app/api/payments/dlocal/[paymentId]/route.ts`

Remove the unused `request` parameter:

```typescript
export async function GET(
  _request: NextRequest,
  { params }:  RouteParams
): Promise<NextResponse> {
```

### 2. **Unused `isDLocalCountry` import** (line 27)

**File:** `app/api/payments/dlocal/create/route.ts`

Remove `isDLocalCountry` from the import statement:

```typescript
import { PRICING, getPlanDuration } from '@/lib/dlocal/constants';
```

### 3. **Unused variables `finalAmount` and `orderId`** (lines 134, 147)

**File:** `app/api/payments/dlocal/create/route.ts`

Remove these unused variable declarations:

```typescript
// Remove lines 134-135:
let finalAmount = localAmount;
let discountAmount = 0;

// Change to:
let discountAmount = 0;

// Remove line 147:
const orderId = `order-${userId}-${Date.now()}`;
```

### 4. **Unused `extractUserIdFromOrderId` import** (line 21)

**File:** `app/api/webhooks/dlocal/route. ts`

Remove `extractUserIdFromOrderId` from the import:

```typescript
import {
  verifyWebhookSignature,
  mapDLocalStatus,
} from '@/lib/dlocal/dlocal-payment.service';
```

### 5. **Type mismatch: `undefined` not assignable to `string | null`** (line 219)

**File:** `lib/dlocal/dlocal-payment.service.ts`

The function returns `string | null` but can return `undefined`. Fix the return type or ensure it always returns `string | null`:

```typescript
export function extractUserIdFromOrderId(orderId: string): string | null {
  const parts = orderId.split('-');
  if (parts.length >= 3 && parts[0] === 'order') {
    return parts[1] || null; // Ensure it's never undefined
  }
  return null;
}
```

These changes will resolve all TypeScript compilation errors and allow the CI build to pass.

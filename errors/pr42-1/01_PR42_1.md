**Cause of Failure:**
The job failed during the Next.js production build due to a compilation error in `lib/hooks/useAffiliateConfig.ts`, which is imported by `app/affiliate/dashboard/page.tsx`. This is confirmed by logs:

```
./lib/hooks/useAffiliateConfig.ts
Failed to compile.
Import trace for requested module:
./app/affiliate/dashboard/page.tsx
> Build failed because of webpack errors
```

**Solution:**
Reviewing [`lib/hooks/useAffiliateConfig.ts`](https://github.com/ripper7375/trading-alerts-saas-public/blob/759ff2b7a5d8a142f3129f6a558c1cf019597a54/lib/hooks/useAffiliateConfig.ts) shows that the code is valid TypeScript and SWR, but possible causes include:

1. **Missing/Incorrect SWR/Fetch Dependency:**  
   Ensure `swr` and `node-fetch` (if used for SSR) are installed:

```sh
pnpm add swr
pnpm add node-fetch
```

If using Next.js 13/14 app directory features, make sure any API fetches are compatible with server/client boundaries.

2. **Default Export Conflict:**  
   The file includes both:

```typescript
export function useAffiliateConfig(): UseAffiliateConfigReturn { ... }
export default useAffiliateConfig;
```

This should work as long as named and default exports are intended, but if a named import is used instead of a default import elsewhere, fix the import line:
**If you use:**

```tsx
import { useAffiliateConfig } from '@/lib/hooks/useAffiliateConfig';
```

Make sure you actually have a named export. If using default export, change the import to:

```tsx
import useAffiliateConfig from '@/lib/hooks/useAffiliateConfig';
```

Double-check that [`app/affiliate/dashboard/page.tsx`](https://github.com/ripper7375/trading-alerts-saas-public/blob/759ff2b7a5d8a142f3129f6a558c1cf019597a54/app/affiliate/dashboard/page.tsx) uses a compatible import statement that matches the exported function.

3. **API Route Unavailable:**  
   The hook uses `'/api/config/affiliate'`:

```typescript
useSWR<AffiliateConfig>(
  '/api/config/affiliate',
  fetcher,
  ...
)
```

If this API endpoint does not exist, SWR will throw a fetch error during build-time static analysis. Ensure you have an API route at `pages/api/config/affiliate.ts` or `app/api/config/affiliate/route.ts` that returns the required JSON object.

**Example Stub API (for testing):**

```typescript
// app/api/config/affiliate/route.ts
export async function GET() {
  return Response.json({
    discountPercent: 20,
    commissionPercent: 20,
    codesPerMonth: 15,
    regularPrice: 29.0,
    lastUpdated: new Date().toISOString(),
  });
}
```

4. **Type Error in Props or Return:**  
   Confirm that any usage of values returned from the hook elsewhere are using correct types and defaults.

**Summary of Steps to Fix:**

- Confirm `swr` is installed and up-to-date.
- Match default/named export with the import style used (recommended: use default export).
- Ensure `/api/config/affiliate` route exists and returns required fields.
- Ensure TypeScript and Next.js versions are compatible.
- Re-run the build after applying these changes.

**Most likely fix:**  
Add or correct `import useAffiliateConfig from '@/lib/hooks/useAffiliateConfig';`  
and ensure `/api/config/affiliate` route/file exists.

**Code suggestions:**

- If the import is named:
  ```tsx
  import { useAffiliateConfig } from '@/lib/hooks/useAffiliateConfig';
  ```
  But the file provides default export, use:
  ```tsx
  import useAffiliateConfig from '@/lib/hooks/useAffiliateConfig';
  ```
- Create the missing API route:
  ```typescript
  // app/api/config/affiliate/route.ts
  export async function GET() {
    return Response.json({
      discountPercent: 20,
      commissionPercent: 20,
      codesPerMonth: 15,
      regularPrice: 29.0,
      lastUpdated: new Date().toISOString(),
    });
  }
  ```

If you make these adjustments, the build should succeed. If more details from the error trace are available, address any specific missing types, incorrect imports, or missing API endpoints.

For a direct view, see the [hook code](https://github.com/ripper7375/trading-alerts-saas-public/blob/759ff2b7a5d8a142f3129f6a558c1cf019597a54/lib/hooks/useAffiliateConfig.ts) and [calling component](https://github.com/ripper7375/trading-alerts-saas-public/blob/759ff2b7a5d8a142f3129f6a558c1cf019597a54/app/affiliate/dashboard/page.tsx) for reference.

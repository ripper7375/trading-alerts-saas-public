The job failed because your code is trying to access prisma.systemConfig and prisma.systemConfigHistory, but PrismaClient does not have these properties by default. They are model names from your Prisma schema, so you should access them as properties of a PrismaClient instance (not on the class), which you are already doing correctly.

However, if you see TS2339 errors like “Property 'systemConfig' does not exist on type 'PrismaClient'”, this usually means:

- You have not generated the Prisma client after adding systemConfig and systemConfigHistory models to your schema.
- Or, the models do not exist in your prisma/schema.prisma file.

**Solution Steps:**

1. In your prisma/schema.prisma file, ensure you have models for SystemConfig and SystemConfigHistory, with model names exactly matching the case used (Prisma generates .systemConfig for model SystemConfig, etc).

2. From the project root, run:
   ```
   npx prisma generate
   ```

This will regenerate the client and make those models available on prisma.

**Example schema addition:**

```prisma
model SystemConfig {
  key        String   @id
  value      String
  updatedBy  String?
  updatedAt  DateTime @updatedAt
  // Add other fields as necessary
}

model SystemConfigHistory {
  id        Int      @id @default(autoincrement())
  configKey String
  oldValue  String
  newValue  String
  changedBy String
  reason    String?
  createdAt DateTime @default(now())
}
```

**Code references:**

- The failing lines using prisma.systemConfig are in:
  - [app/api/admin/settings/affiliate/route.ts (lines 86, 290, 302, 319)](https://github.com/ripper7375/trading-alerts-saas-public/blob/b3f5c9b23517b7353300d4bd9ff01a1d1fc57ec9/app/api/admin/settings/affiliate/route.ts)
  - [app/api/config/affiliate/route.ts (line 54)](https://github.com/ripper7375/trading-alerts-saas-public/blob/b3f5c9b23517b7353300d4bd9ff01a1d1fc57ec9/app/api/config/affiliate/route.ts)
  - [lib/affiliate/constants.ts (line 125)](https://github.com/ripper7375/trading-alerts-saas-public/blob/b3f5c9b23517b7353300d4bd9ff01a1d1fc57ec9/lib/affiliate/constants.ts)

**Summary of Fix:**

- Make sure you have the correct models in your Prisma schema.
- Always run npx prisma generate after modifying the schema.

This will resolve TS2339, and your PrismaClient instance will correctly provide the .systemConfig and .systemConfigHistory properties.

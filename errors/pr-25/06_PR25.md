I'll analyze the failing job to find a solution for you. ## Solution for TypeScript Error in Commission Aggregator

The type-check is failing at **line 149** in `commission-aggregator.ts` because the `kycStatus` property has type mismatch. The error indicates that `kycStatus` is typed as `string` from the database, but the `PayableAffiliate` type expects it to be `"none" | RiseWorksKycStatus`.

### The Problem

On lines 180-182, you're setting:

```typescript
kycStatus: hasRiseAccount
  ? affiliate.riseAccount?. kycStatus ?? 'PENDING'
  : 'none',
```

The `affiliate.riseAccount?.kycStatus` from Prisma returns a `string`, but your type definition expects a union type.

### Solution

You need to cast the `kycStatus` to the expected type. Update **lines 180-182** to:

```typescript
kycStatus: hasRiseAccount
  ? (affiliate.riseAccount?.kycStatus as RiseWorksKycStatus) ?? 'PENDING'
  : 'none',
```

Or, if you want to ensure type safety with a type guard:

```typescript
kycStatus: hasRiseAccount
  ?  ((affiliate.riseAccount?.kycStatus ??  'PENDING') as RiseWorksKycStatus)
  : 'none',
```

**Recommended**: Check your `@/types/disbursement` type definitions and ensure that the Prisma schema's KYC status enum matches the `RiseWorksKycStatus` type. If they're defined as enums in Prisma, the types should align automatically. If there's a mismatch, you may need to update either the Prisma schema enum or the TypeScript type definition to ensure consistency.

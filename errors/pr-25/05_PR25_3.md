I'll analyze the failing job to find a solution for you. The test failure is in the "should generate unique batch numbers" test at line 164. The test expects two consecutively generated batch numbers to be different, but they're occasionally the same.

## Root Cause

The `generateBatchNumber()` function likely uses a timestamp-based approach that isn't granular enough when called in rapid succession within the same millisecond, causing duplicate values.

## Solution

You need to update the `generateBatchNumber()` function in `lib/disbursement/constants.ts` to ensure uniqueness. Here are two approaches:

### Option 1: Add a random component with higher entropy

```typescript
export function generateBatchNumber(): string {
  const year = new Date().getFullYear();
  const timestamp = Date.now();
  const random = Math.random().toString(36).substring(2, 10).toUpperCase();
  return `BATCH-${year}-${timestamp}-${random}`;
}
```

### Option 2: Use crypto for true randomness

```typescript
import { randomBytes } from 'crypto';

export function generateBatchNumber(): string {
  const year = new Date().getFullYear();
  const randomId = randomBytes(8).toString('hex').toUpperCase();
  return `BATCH-${year}-${randomId}`;
}
```

### Option 3: If the current implementation uses just a random string without timestamp

Add a timestamp to guarantee uniqueness:

```typescript
export function generateBatchNumber(): string {
  const year = new Date().getFullYear();
  const timestamp = Date.now().toString(36).toUpperCase();
  const random = Math.random().toString(36).substring(2, 8).toUpperCase();
  return `BATCH-${year}-${timestamp}${random}`;
}
```

The key is to combine both a timestamp and a random component to ensure that even if called multiple times in the same millisecond, the random portion will make them unique.

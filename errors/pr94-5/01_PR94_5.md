The main failures in job 59001979489 are due to database errors in your API tests and a missing CRON_SECRET environment variable for cron job logic. There are also issues with Codecov uploads due to a missing upload token and missing coverage report.

### 1. Database Errors in API Tests

Many tests (`admin-reports`, `admin-affiliates`, `admin.users`, etc.) log:

```
Error: Database error
```

This suggests your test database isn't reachable or configured.

**Solution:**

- Ensure your test environment provides valid database connection credentials and the database is running and accessible.
- If you're using environment variables (like DATABASE_URL), verify they're correct and set for CI.

**Example for GitHub Actions in `.github/workflows/ci-nextjs-progressive.yml`:**

```yaml
env:
  DATABASE_URL: ${{ secrets.TEST_DATABASE_URL }}
```

Add the corresponding secret in your repository settings.

### 2. CRON_SECRET Not Configured

Tests targeting `app/api/cron/process-pending-disbursements/route.ts` fail due to:

```
console.error
  CRON_SECRET not configured
```

Your code expects a `CRON_SECRET` env var to be present but cannot find it during CI.

**Solution:**

- Set `CRON_SECRET` in the workflow environment.

**Example:**

```yaml
env:
  CRON_SECRET: ${{ secrets.TEST_CRON_SECRET }}
```

Add `TEST_CRON_SECRET` to your repository secrets.

### 3. Codecov Upload Fails

Logs state:

```
error - Commit creating failed: {"message":"Token required - not valid tokenless upload"}
```

and

```
Error: No coverage reports found. Please make sure you're generating reports successfully.
```

**Solution:**

- Set the Codecov token in your workflow, e.g.:

```yaml
env:
  CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
```

- Also ensure you're generating a coverage report (like `coverage/lcov.info`) in your test run, and check your Jest or coverage config.

---

**In summary:**

- Set up your DB and CRON_SECRET env vars in GitHub Actions.
- Make sure the test database is accessible.
- Add Codecov token.
- Verify coverage report generation.

If you need the exact lines or want to review files like `route.ts` or your workflow config, let me know!

GitHub Copilot Chat Assistant

Problem

- TypeScript build error: "Property 'id' comes from an index signature, so it must be accessed with ['id']."  
  Caused by this line in app/admin/affiliates/[id]/page.tsx at commit ref 76fdad15afeaab92920b39f7b4a8dc16120a4f04:
  const affiliateId = params.id as string;

Root cause

- next/navigation's useParams() returns a params object typed with an index signature (e.g. Record<string, string | string[] | undefined>), so TypeScript disallows dot-access (params.id) and requires bracket access (params['id']). Also the value may be string | string[] | undefined, so you should handle arrays/undefined.

Quick fixes (pick one)

1. Minimal change — fix TypeScript error immediately
   Replace the dot access with bracket access:

Replace:
const params = useParams();
const affiliateId = params.id as string;

With:
const params = useParams();
const affiliateId = params['id'] as string;

This is the smallest change and will stop the compile error.

2. Safer fix — handle string | string[] | undefined properly (recommended)
   This avoids casting and handles the case where the param might be an array or undefined:

Replace those lines with:

const params = useParams();
const rawId = params['id'];
const affiliateId = Array.isArray(rawId) ? rawId[0] : rawId; // string | undefined

Notes:

- Your code already checks if (affiliateId) before fetching, so affiliateId being undefined is acceptable.
- If you prefer affiliateId always to be string, you can set a fallback: const affiliateId = (Array.isArray(rawId) ? rawId[0] : rawId) ?? '';

3. Strict typing approach
   If you want strong typing:

const params = useParams() as Record<string, string | string[] | undefined>;
const rawId = params['id'];
const affiliateId: string | undefined = Array.isArray(rawId) ? rawId[0] : rawId;

Suggested patch (safest / recommended)
Replace the current lines 66–68 with:

const params = useParams();
const rawId = params['id'];
const affiliateId = Array.isArray(rawId) ? rawId[0] : rawId; // string | undefined

Why this solves it

- Using params['id'] satisfies TypeScript when the object has an index signature.
- Handling Array.isArray(rawId) prevents runtime issues if the router provides an array for the param.
- No forced as string cast reduces the chance of runtime errors.

Reference

- File: app/admin/affiliates/[id]/page.tsx at ref 76fdad15afeaab92920b39f7b4a8dc16120a4f04
  https://github.com/ripper7375/trading-alerts-saas-public/blob/76fdad15afeaab92920b39f7b4a8dc16120a4f04/app/admin/affiliates/[id]/page.tsx

If you want, I can produce a small patch/PR with this change.

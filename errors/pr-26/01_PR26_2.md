The job failed because the object in app/api/disbursement/affiliates/[affiliateId]/route.ts does not have the property commissionType, but the code references c.commissionType at line 109. To resolve this, ensure the commissions returned from Prisma include commissionType.

Update the include block in your Prisma query to:

```typescript
commissions: {
  where: {
    status: 'APPROVED',
    disbursementTransaction: null,
  },
  orderBy: { createdAt: 'desc' },
  take: 100,
  select: {
    id: true,
    commissionAmount: true,
    commissionType: true, // add this line
    createdAt: true,
  },
},
```

This ensures commissionType is available on each commission. See the affected section in the file here (ref: a9220a3c12431433fde363010cf6d5b47953c411): https://github.com/ripper7375/trading-alerts-saas-public/blob/a9220a3c12431433fde363010cf6d5b47953c411/app/api/disbursement/affiliates/[affiliateId]/route.ts

The root cause of the failing job is that your test for the Indicators API expects the error message "MT5 service error", but your API returns "Internal server error" instead. This causes the assertion in your test suite to fail.

Here's the key error from your logs:

```
Expected: "MT5 service error"
Received: "Internal server error"
// (__tests__/api/indicators.test.ts:482)
```

**Solution:**

1. In your `/api/indicators/[symbol]/[timeframe]` route handler, ensure that when an `MT5ServiceError` occurs, the API responds with `{ error: 'MT5 service error' }` instead of the generic "Internal server error".

2. Update the error handling block for the MT5 service call to check for the error type and set the error message accordingly.

**Example fix (in TypeScript):**
In `app/api/indicators/[symbol]/[timeframe]/route.ts` (or the relevant indicators API route file), update the error-handling code:

```ts
try {
  // ...existing logic
} catch (error) {
  if (error instanceof MT5ServiceError) {
    return NextResponse.json(
      { success: false, error: 'MT5 service error' },
      { status: 500 }
    );
  }
  // fallback for other errors
  return NextResponse.json(
    { success: false, error: 'Internal server error' },
    { status: 500 }
  );
}
```

**Summary:**

- Map `MT5ServiceError` to the precise message your tests expect.
- If you handle errors elsewhere, audit those handlers to make sure each test expectation lines up with returned error messages.

Once you make this change, your test should pass.

For your Codecov warning:

- The upload is failing due to a missing token for protected branches. Review your CI secrets and add the `CODECOV_TOKEN` if necessary for this branch. This is not related to the test failure but will silence CI warnings.

If you need to see the exact code section to patch or have questions about where to apply the fix, let me know the file location or share the handler code!
